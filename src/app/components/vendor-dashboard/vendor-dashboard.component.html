<div class="flex h-screen bg-gray-50">
  <!-- Sidebar -->
  <div class="w-64 bg-white shadow-sm border-r border-gray-200 flex flex-col">
    <!-- Header -->
    <div class="p-6 border-b border-gray-200">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-xl font-bold text-gray-900">Vendor Portal</h1>
          <p class="text-sm text-gray-600 mt-1">{{user?.name}}</p>
        </div>
        <button
          (click)="showResourceModal = true"
          class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200">
          <lucide-icon name="plus" class="w-4 h-4"></lucide-icon>
        </button>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="flex-1 p-4 space-y-2">
      <button
        *ngFor="let tab of [
          { id: 'overview', label: 'Overview', icon: 'home' },
          { id: 'resources', label: 'My Resources', icon: 'users' },
          { id: 'requirements', label: 'Opportunities', icon: 'briefcase' },
          { id: 'applications', label: 'Applications', icon: 'trending-up' }
        ]; track tab.id"
        (click)="setActiveTab(tab.id)"
        [class]="'w-full flex items-center px-4 py-3 text-left rounded-lg transition-colors ' + 
          (activeTab === tab.id
            ? 'bg-blue-50 text-blue-700 border border-blue-200'
            : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900')">
        <lucide-icon [name]="tab.icon" class="w-5 h-5 mr-3"></lucide-icon>
        <span class="font-medium">{{tab.label}}</span>
      </button>

      <!-- Vendor Management Dropdown -->
      <div class="vendor-management-dropdown relative">
        <button
          (click)="toggleVendorManagementDropdown()"
          [class]="'w-full flex items-center justify-between px-4 py-3 text-left rounded-lg transition-colors ' + 
            (['user-management', 'skill-management'].includes(activeTab)
              ? 'bg-blue-50 text-blue-700 border border-blue-200'
              : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900')">
          <div class="flex items-center">
            <lucide-icon name="users" class="w-5 h-5 mr-3"></lucide-icon>
            <span class="font-medium">Vendor Management</span>
          </div>
          <lucide-icon 
            name="chevron-down" 
            [class]="'w-4 h-4 transition-transform ' + (showVendorManagementDropdown ? 'rotate-180' : '')">
          </lucide-icon>
        </button>
        
        <div *ngIf="showVendorManagementDropdown" class="mt-1 ml-4 space-y-1 border-l-2 border-gray-200 pl-4">
          <button
            (click)="setActiveTab('user-management')"
            [class]="'w-full flex items-center px-3 py-2 text-left rounded-lg transition-colors text-sm ' + 
              (activeTab === 'user-management'
                ? 'bg-blue-50 text-blue-700'
                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900')">
            <lucide-icon name="user" class="w-4 h-4 mr-2"></lucide-icon>
            <span>User Management</span>
          </button>
          <button
            (click)="setActiveTab('skill-management')"
            [class]="'w-full flex items-center px-3 py-2 text-left rounded-lg transition-colors text-sm ' + 
              (activeTab === 'skill-management'
                ? 'bg-blue-50 text-blue-700'
                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900')">
            <lucide-icon name="briefcase" class="w-4 h-4 mr-2"></lucide-icon>
            <span>Skill Management</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Stats Summary -->
    <div class="p-4 border-t border-gray-200">
      <div class="space-y-3">
        <div *ngFor="let stat of stats; track stat.title" class="flex items-center justify-between">
          <div class="flex items-center">
            <div [class]="'p-2 rounded-lg ' + stat.bg">
              <lucide-icon [name]="stat.icon" [class]="'w-4 h-4 ' + stat.color"></lucide-icon>
            </div>
            <span class="ml-3 text-sm font-medium text-gray-700">{{stat.title}}</span>
          </div>
          <span class="text-lg font-bold text-gray-900">{{stat.value}}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Content Header -->
    <div class="bg-white border-b border-gray-200 px-6 py-4">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-2xl font-bold text-gray-900">
            <ng-container [ngSwitch]="activeTab">
              <ng-container *ngSwitchCase="'overview'">Dashboard Overview</ng-container>
              <ng-container *ngSwitchCase="'resources'">My Resources</ng-container>
              <ng-container *ngSwitchCase="'requirements'">Opportunities</ng-container>
              <ng-container *ngSwitchCase="'applications'">Applications</ng-container>
              <ng-container *ngSwitchCase="'user-management'">User Management</ng-container>
              <ng-container *ngSwitchDefault>Skill Management</ng-container>
            </ng-container>
          </h2>
          <p class="text-gray-600 mt-1">
            <ng-container [ngSwitch]="activeTab">
              <ng-container *ngSwitchCase="'overview'">Welcome back to your dashboard</ng-container>
              <ng-container *ngSwitchCase="'resources'">Manage your available resources</ng-container>
              <ng-container *ngSwitchCase="'requirements'">Explore new business opportunities</ng-container>
              <ng-container *ngSwitchCase="'applications'">Track your resource applications</ng-container>
              <ng-container *ngSwitchCase="'user-management'">Manage organization users and permissions</ng-container>
              <ng-container *ngSwitchDefault>Manage your organization's skill portfolio</ng-container>
            </ng-container>
          </p>
        </div>
        <ng-container [ngSwitch]="activeTab">
          <button *ngSwitchCase="'resources'"
            (click)="showResourceModal = true"
            class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center">
            <lucide-icon name="plus" class="w-4 h-4 mr-2"></lucide-icon>
            Add Resource
          </button>
          <button *ngSwitchCase="'user-management'"
            (click)="showAddUserModal = true"
            class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center">
            <lucide-icon name="plus" class="w-4 h-4 mr-2"></lucide-icon>
            Add User
          </button>
          <button *ngSwitchCase="'skill-management'"
            (click)="showAddSkillModal = true"
            class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center">
            <lucide-icon name="plus" class="w-4 h-4 mr-2"></lucide-icon>
            Add Skill
          </button>
        </ng-container>
      </div>
    </div>

    <!-- Content Area -->
    <div class="flex-1 overflow-y-auto p-6">
      <div [ngSwitch]="activeTab">
        <!-- Overview Tab -->
        <div *ngSwitchCase="'overview'" class="space-y-6">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Recent Applications -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100">
              <div class="p-6 border-b border-gray-100">
                <h3 class="text-lg font-semibold text-gray-900">Recent Applications</h3>
              </div>
              <div class="p-6">
                <div *ngFor="let app of vendorApplications.slice(0, 5); track app.id" 
                     class="flex items-center justify-between py-3 border-b border-gray-100 last:border-0">
                  <div>
                    <p class="font-medium text-gray-900">{{getResourceName(app.resourceId)}}</p>
                    <p class="text-sm text-gray-600">{{getRequirementTitle(app.requirementId)}}</p>
                  </div>
                  <span [class]="'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ' + getStatusBadge(app.status).color">
                    <lucide-icon [name]="getStatusBadge(app.status).icon" class="w-3 h-3 mr-1"></lucide-icon>
                    {{formatStatus(app.status)}}
                  </span>
                </div>
                <p *ngIf="vendorApplications.length === 0" class="text-gray-500 text-center py-8">No applications yet</p>
              </div>
            </div>

            <!-- Top Requirements -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100">
              <div class="p-6 border-b border-gray-100">
                <h3 class="text-lg font-semibold text-gray-900">Latest Opportunities</h3>
              </div>
              <div class="p-6">
                <div *ngFor="let req of requirements.slice(0, 5); track req.id" 
                     class="py-3 border-b border-gray-100 last:border-0">
                  <div class="flex justify-between items-start">
                    <div>
                      <p class="font-medium text-gray-900">{{req.title}}</p>
                      <p class="text-sm text-gray-600">{{req.clientName}}</p>
                      <div class="flex items-center mt-1 space-x-4">
                        <span class="text-xs text-gray-500">${{req.budget}}/hr</span>
                        <span class="text-xs text-gray-500">{{req.duration}}</span>
                      </div>
                    </div>
                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">
                      {{req.status}}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <button
                (click)="showResourceModal = true"
                class="p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left">
                <lucide-icon name="plus" class="w-6 h-6 text-blue-600 mb-2"></lucide-icon>
                <h4 class="font-medium text-gray-900">Add New Resource</h4>
                <p class="text-sm text-gray-600 mt-1">Add a new resource to your portfolio</p>
              </button>
              
              <button
                (click)="setActiveTab('requirements')"
                class="p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors text-left">
                <lucide-icon name="briefcase" class="w-6 h-6 text-green-600 mb-2"></lucide-icon>
                <h4 class="font-medium text-gray-900">Browse Opportunities</h4>
                <p class="text-sm text-gray-600 mt-1">Find new requirements to apply your resources</p>
              </button>
              
              <button
                (click)="setActiveTab('applications')"
                class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors text-left">
                <lucide-icon name="trending-up" class="w-6 h-6 text-purple-600 mb-2"></lucide-icon>
                <h4 class="font-medium text-gray-900">Track Applications</h4>
                <p class="text-sm text-gray-600 mt-1">Monitor the status of your applications</p>
              </button>
            </div>
          </div>
        </div>

        <!-- Other tabs would go here -->
        <div *ngSwitchDefault class="text-center py-12">
          <lucide-icon name="info" class="mx-auto h-12 w-12 text-gray-400"></lucide-icon>
          <h3 class="mt-2 text-sm font-medium text-gray-900">Feature Coming Soon</h3>
          <p class="mt-1 text-sm text-gray-500">This section is under development.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Resource Modal -->
  <app-resource-modal *ngIf="showResourceModal" (close)="showResourceModal = false"></app-resource-modal>

  <!-- Apply Resource Modal -->
  <app-apply-resource-modal 
    *ngIf="showApplyModal" 
    [requirementId]="selectedRequirementId"
    (close)="closeApplyModal()">
  </app-apply-resource-modal>

  <!-- Add User Modal -->
  <app-add-user-modal *ngIf="showAddUserModal" (close)="showAddUserModal = false"></app-add-user-modal>

  <!-- Add Skill Modal -->
  <app-add-skill-modal *ngIf="showAddSkillModal" (close)="showAddSkillModal = false"></app-add-skill-modal>
</div>